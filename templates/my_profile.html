{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-4">

    <!-- Profile Header -->
    <div class="card shadow-sm rounded-0">
        <div class="card-body d-flex align-items-center">

            <!-- Profile Picture -->
            <img src="{{ profile.profile_pic.url }}" class="rounded-circle border" width="120" height="120">

            <div class="ms-4">
                <h3 class="mb-0">{{ request.user.first_name }} {{ request.user.last_name }}</h3>
                <p class="text-muted mb-0">{{ request.user.email }}</p>
                <p class="mb-2">Phone: {{ profile.phone_number }}</p>

                <a href="{% url 'update_profile' %}" class="btn btn-dark btn-sm mt-2">Edit Profile</a>
            </div>

        </div>
    </div>
    <br>

    <!-- User Posts Section -->
    <h4 class="mb-3 text-uppercase" style="font-size: 2rem;
            color:white;
            font-weight: 700;
            letter-spacing: 1px;"> Posts</h4>

    {% if my_posts %}
    <div class="row">
        {% for post in my_posts %}
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm rounded-0">

                {% if post.image %}
                <img src="{{ post.image.url }}" class="card-img-top" height="180">
                {% endif %}

                <div class="card-body">
                    <h5 class="card-title">{{ post.title }}</h5>

                    <a href="{% url 'edit_posts' post.id %}" class="btn btn-warning btn-sm"><i class="bi bi-pencil-square fs-5"></i></a>
                    <a href="{% url 'delete_posts' post.id %}"
                       class="btn btn-danger btn-sm"
                       onclick="return confirm('Are you sure?')"><i class="bi bi-trash fs-5"></i></a>
                </div>

            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="text-muted" style="color: #fff !important;" >You haven't created any posts yet.</p>
    {% endif %}

</div>
{% endblock %}
